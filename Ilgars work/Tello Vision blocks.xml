<blocks app="Snap! 7, https://snap.berkeley.edu" version="2"><palette><category name="Tello" color="163,0,30,1"/></palette><block-definition s="connect to url %&apos;url&apos;" type="reporter" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%txt">ws://localhost:3001</input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>url</l></list><l>const socket = new WebSocket(url);&#xD;//let socket.response;&#xD;&#xD;socket.addEventListener(&apos;open&apos;, function (event) {&#xD;    socket.send(&apos;Hello Server, Snap! here&apos;);&#xD;});&#xD;&#xD;socket.addEventListener(&apos;message&apos;, function (event) {&#xD;    socket.response = event.data;&#xD;    // console.log(&apos;Message from server &apos;, event.data);&#xD;});&#xD;return socket;</l></block><list><block var="url"/></list></block></block></script></block-definition><block-definition s="send msg: msg %&apos;msg&apos; to %&apos;socket&apos; with response" type="reporter" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>socket</l><l>msg</l></list><l>socket.send(msg);&#xD;return socket.response;</l></block><list><block var="socket"/><block var="msg"/></list></block></block></script></block-definition><block-definition s="send msg: msg %&apos;msg&apos; to %&apos;socket&apos; without response" type="command" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"></input></inputs><script><block s="doRun"><block s="reportJSFunction"><list><l>socket</l><l>msg</l></list><l>socket.send(msg);&#xD;return socket.response;</l></block><list><block var="socket"/><block var="msg"/></list></block></script></block-definition><block-definition s="get state from %&apos;drone&apos;" type="reporter" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doReport"><custom-block s="send msg: msg %s to %s with response"><l>state</l><block var="drone"/></custom-block></block></script></block-definition><block-definition s="get frame from url %&apos;url&apos;" type="reporter" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>frame</l></list></block><block s="doSetVar"><l>frame</l><block s="evaluate"><block s="reportJSFunction"><list><l>frame</l></list><l>var img = new Image(),&#xD;    cst = false;&#xD;img.onload = () =&gt; cst = new Costume(img);&#xD;img.src = frame;&#xD;return () =&gt; cst;</l></block><list><custom-block s="send msg: msg %s to %s with response"><l>frame</l><block var="url"/></custom-block></list></block></block><block s="doWaitUntil"><block s="evaluate"><block var="frame"/><list></list></block></block><block s="doSetVar"><l>last_frame</l><block s="evaluate"><block var="frame"/><list></list></block></block><block s="doReport"><block var="last_frame"/></block></script></block-definition><block-definition s="%&apos;drone&apos; takeoff" type="command" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><custom-block s="send msg: msg %s to %s without response"><l>control takeoff</l><block var="drone"/></custom-block></script></block-definition><block-definition s="%&apos;drone&apos; land" type="command" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><custom-block s="send msg: msg %s to %s without response"><l>control land</l><block var="drone"/></custom-block></script></block-definition><block-definition s="%&apos;drone&apos; flip %&apos;option&apos;" type="command" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"><options>forward=f&#xD;backward=b&#xD;right=r&#xD;left=l</options></input></inputs><script><custom-block s="send msg: msg %s to %s without response"><block s="reportJoinWords"><list><l>control flip </l><block var="option"/></list></block><block var="drone"/></custom-block></script></block-definition><block-definition s="%&apos;drone&apos; move %&apos;direction&apos;" type="command" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"><options>left&#xD;right&#xD;forward&#xD;backward&#xD;up&#xD;down</options></input></inputs><script><custom-block s="send msg: msg %s to %s without response"><block s="reportJoinWords"><list><l>control move </l><block var="direction"/></list></block><block var="drone"/></custom-block></script></block-definition><block-definition s="%&apos;drone&apos; rotate %&apos;direction&apos;" type="command" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input><input type="%s"><options>left&#xD;right</options></input></inputs><script><custom-block s="send msg: msg %s to %s without response"><block s="reportJoinWords"><list><l>control rotate </l><block var="direction"/></list></block><block var="drone"/></custom-block></script></block-definition><block-definition s="get frame from base64 %&apos;url&apos;" type="reporter" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>test</l></list></block><block s="doSetVar"><l>test</l><block s="evaluate"><block s="reportJSFunction"><list><l>frame</l></list><l>var img = new Image(),&#xD;    cst = false;&#xD;img.onload = () =&gt; cst = new Costume(img);&#xD;img.src = frame;&#xD;return () =&gt; cst;</l></block><list><block var="url"/></list></block></block><block s="doWaitUntil"><block s="evaluate"><block var="test"/><list></list></block></block><block s="doReport"><block s="evaluate"><block var="test"/><list></list></block></block></script></block-definition><block-definition s="get battery level %&apos;drone&apos;" type="reporter" category="Tello"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doReport"><block s="reportListItem"><l>2</l><block s="reportListItem"><l>1</l><block s="reportListItem"><l>2</l><block s="reportListItem"><l>16</l><block s="reportTextSplit"><custom-block s="get state from %s"><block var="drone"/></custom-block><l><option>json</option></l></block></block></block></block></block></block></script></block-definition></blocks>